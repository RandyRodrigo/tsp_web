---
import { CountUp } from "@/components/CountUp";
import { getI18N } from "@/i18n";
import {
  getLangFromUrl,
  useTranslations,
  useTranslatedPath,
} from "@/i18n/utils";

const { currentLocale } = Astro;
const i18n = getI18N({currentLocale});
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const translatePath = useTranslatedPath(lang);
---

<section class="w-full bg-gray-100 py-20 px-20">
    <div class="max-w-6xl mx-auto">
        <h2 class="text-4xl lg:text-5xl font-semibold text-center text-balance mb-10 lg:mb-20 text-rojo">
            {i18n.NUMEROS_TITLE}
        </h2>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-y-10 divide-x-4 divide-red-500">
            <div class="flex flex-col justify-center items-center">
                <span class="number text-6xl font-bold text-balance tabular-nums tracking-tighter">
                    +<CountUp client:visible initial={0} final={1500} />
                </span>
                <span class="uppercase opacity-70 text-center">{i18n.NUMEROS_COUNTUP_1}</span>
            </div>
            <div class="flex flex-col items-center justify-center">
                <span class="number text-6xl font-bold text-balance tabular-nums tracking-tighter">
                    +<CountUp client:visible initial={0} final={1500} />
                </span>
                <span class="uppercase opacity-70 text-center">{i18n.NUMEROS_COUNTUP_2}</span>
            </div>
            <div class="flex flex-col items-center justify-center">
                <span class="number text-6xl font-bold text-balance tabular-nums tracking-tighter">
                    +<CountUp client:visible initial={0} final={1000} />
                </span>
                <span class="uppercase opacity-70 text-center">{i18n.NUMEROS_COUNTUP_3}</span>
            </div>
        </div>

        <div class="flex flex-col sm:flex-row justify-center pt-20 gap-6 sm:gap-20 items-center">
            <a
              id="trophies"
              class="border-2 border-red-500 hover:bg-red-600 text-red-500 hover:text-white font-semibold py-3 px-6 rounded-md transition-all w-full sm:w-auto text-center hover:scale-110"
              href={translatePath("/contacto/")}
            >
              {i18n.NUMEROS_BUTTON_1}
            </a>
            <a
              id="theater"
              class="border-2 border-red-500 text-red-500 hover:bg-red-600 hover:text-white font-semibold py-3 px-6 rounded-md transition-all w-full sm:w-auto text-center hover:scale-110"
              href={translatePath("/servicio/")}
            >
              {i18n.NUMEROS_BUTTON_2}
            </a>
          </div>
    </div>
    
</section>

<style>
    .number {
        color: #404141;
        text-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
    }
    #theater,
    #trophies-text p {
        animation: cover-animation linear both;
        animation-timeline: view();
    }
    #trophies {
        animation: entry-animation linear both;
        animation-timeline: view();
    }
    #theater {
        animation-range: entry 20% cover 30%;
    }
    #trophies {
        animation-range: entry 30% cover 30%;
    }
    @keyframes entry-animation {
        0% {
        opacity: 0;
        translate: var(--entry-animation) 0;
        }
        100% {
        opacity: 1;
        translate: 0 0;
        }
    }
    @keyframes cover-animation {
        0% {
        opacity: 0;
        translate: var(--cover-animation) 0;
        }
        100% {
        opacity: 1;
        translate: 0 0;
        }
    }
</style>
